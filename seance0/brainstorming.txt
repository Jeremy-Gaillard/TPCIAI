threads conditionnement :

  (1) envoi pièces
      clapet

  (2) contrôle dimensionnel
      (dans 1 ?)

  (3) remplissage cartons
      imprimer cartons

??(4) file d'attente cartons

  (5) remplissage palette

      imprime <-> palette
      file d'attente FIFO
      protégée par _sémaphore_

 ---------------->o (boucle tant que clapet fermé)
 |                |
 |                |
 |                v
 |                o  fermer clapet
 |               / \
 |    (mauvais) /   \ (bonne)
 |             L     _|
 |    rebus   o        o dans carton
 |___________/________/ \
                         \ (plein)
                          \





threads stockage :

  (6) trouver place
      stocker palette

      préparer commande

autres threads :

      écriture journal de bord
  
??    arrêt urgence

  (W) commande inteface client
      (superviseur)



journal de bord :
  - erreurs
  - date
  - reprise

  - caractéristiques lots à fabriquer : - code opérateur
                                        - nombre de pièces défectueuses
                                        - codes défauts


erreur --> OP ? --> stop !
                |
                --> reprise

_AU_
  fermer clapet
  tout sauver
  jeter carton/pièces ?
  ouvrir clapet

_absence carton_
  fermer clapet
  arrivée carton
  ouvrir clapet

_trop de cartons_

_absence palette_

_trop de pièces mauvaises

_imprimante KO_

_commande non prête_
